buildscript {
    ext {
        awsLambdaJavaCoreVersion = '1.2.1'
        awssdkBomVersion = '2.17.156'
        jacksonDatabindVersion = '2.13.2'
        junitBomVersion = '5.8.2'
        hamcrestVersion = '2.2'
        mockitoInlineVersion = '3.11.2'
        okhttpVersion = '4.9.3'
        slf4jSimpleVersion = '1.7.30'

        dependencyManagementPluginVersion = '1.0.11.RELEASE'
        johnrenglemanShadowPluginVersion = '5.0.0'
    }
}

plugins {
    id 'java'
    id "com.github.johnrengelman.shadow" version "${johnrenglemanShadowPluginVersion}"
    id "io.spring.dependency-management" version "${dependencyManagementPluginVersion}"
}

group = 'org.ideaslabut'
version = '1.0.0-SNAPSHOT'
sourceCompatibility = '11'

dependencyManagement {
    imports {
        mavenBom "software.amazon.awssdk:bom:${awssdkBomVersion}"
        mavenBom "org.junit:junit-bom:${junitBomVersion}"
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation "software.amazon.awssdk:sdk-core"
    implementation "software.amazon.awssdk:apigatewaymanagementapi"
    implementation "com.fasterxml.jackson.core:jackson-databind:${jacksonDatabindVersion}"
    implementation "com.amazonaws:aws-lambda-java-core:${awsLambdaJavaCoreVersion}"
    implementation "com.squareup.okhttp3:okhttp:${okhttpVersion}"
    implementation "org.slf4j:slf4j-simple:${slf4jSimpleVersion}"
    implementation 'me.tongfei:progressbar:0.9.3'

    testImplementation "org.junit.jupiter:junit-jupiter-api"
    testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine"

    testImplementation "org.mockito:mockito-inline:${mockitoInlineVersion}"
    testImplementation "org.hamcrest:hamcrest:${hamcrestVersion}"

}

shadowJar {
    exclude "*.sample" , "*ProgressBar*.class", "*Test.class"
    destinationDirectory = file("${buildDir}/libs")
}

test {
    useJUnitPlatform()
}